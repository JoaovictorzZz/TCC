const produtos = [
    {
      "id": 1,
      "nome": "Furadeira Parafusadeira De Impacto Bateria 18v Wesco Ws2319",
      "modelo": "WS2319",
      "marca": "Wesco",
      "descricao": "Furadeira Parafusadeira de Impacto 1/2\" Bateria 18V Wesco WS2319 - 01 Bateria 18V 2.0Ah + Carregador RÃ¡pido Bivolt - Motor Brushless",
      "especificacoes": [
        "AlimentaÃ§Ã£o: Bateria 18V Wesco",
        "TensÃ£o: 18V",
        "RotaÃ§Ãµes: 0 - 500 / 0 - 2000 RPM",
        "Impacto: 0 - 9600 / 0 - 32000 IPM",
        "Torque: 60Nm",
        "Capacidades: 40mm em madeira, 13mm em metal, 16mm em alvenaria",
        "Motor: sem escovas"
      ],
      "itensAcompanha": [
        "01 bateria 18V 2.0Ah",
        "01 Carregador Bivolt RÃ¡pido",
        "01 clip para cinto"
      ],
      "garantia": "1 ano de garantia direto com o fabricante",
      "preco": "1074.90",
      "parcelas": "AtÃ© 12x R$104,21",
      "imagens": [
        "",
        "https://exemplo.com/imagem2.jpg",
        "https://exemplo.com/imagem3.jpg"
      ]
    }

  ,
  {
    "id": 2,
    "nome": "Parafusadeira Furadeira de Impacto Wesco 3/8 Carregador Bivolt",
    "modelo": "WS2547",
    "marca": "Wesco",
    "descricao": "Furadeira Parafusadeira de Impacto 3/8\" Bateria 12V Wesco WS2547 - Com 01 Bateria de 1.Ah + 01 Carregar",
    "especificacoes": [
      "AlimentaÃ§Ã£o: Bateria 12V 1.5Ah Li-ion",
      "TensÃ£o: 12V",
      "RotaÃ§Ãµes: 0-350 / 0-1350 RPM",
      "Impacto: 0-5600 / 0-21600 IPM",
      "Torque: PosiÃ§Ã£o de torque: 21 + 1 + 1; Torque mÃ¡ximo: 25Nm",
      "Capacidades: Capacidade mÃ¡xima de perfuraÃ§Ã£o em aÃ§o: 8m; Capacidade mÃ¡xima de perfuraÃ§Ã£o em alvenaria: 8mm; Capacidade mÃ¡xima de perfuraÃ§Ã£o em madeira: 20mm",
      "Motor: sem escovas"
    ],
    "itensAcompanha": [
      "01 bateria 18V 2.0Ah",
      "01 Carregador Bivolt RÃ¡pido",
      "01 clip para cinto"
    ],
    "garantia": "1 ano de garantia direto com o fabricante",
    "preco": "483,90",
    "parcelas": "AtÃ© 12x R$104,21",
    "imagens": [
      "",
      "https://exemplo.com/imagem2.jpg",
      "https://exemplo.com/imagem3.jpg"
    ]
  }
,
  {
    "id": 3,
    "nome": "Esmerilhadeira Angular Corte Desbaste 900w Wesco 220v Ws4750",
    "modelo": "WS4750",
    "marca": "Wesco",
    "descricao": "A Esmerilhadeira Angular WS4750 da Wesco Ã© uma ferramenta essencial para trabalhos de corte e desbaste em diferentes materiais. Equipada com uma trava do eixo para troca de disco, proporciona praticidade e seguranÃ§a durante a substituiÃ§Ã£o dos acessÃ³rios. Sua empunhadura auxiliar com 2 posiÃ§Ãµes oferece versatilidade e conforto ao usuÃ¡rio, permitindo uma melhor adaptaÃ§Ã£o Ã s diferentes necessidades de trabalho. Com um corpo mais fino e ergonÃ´mico, proporciona manuseio confortÃ¡vel e preciso, reduzindo a fadiga durante o uso prolongado. AlÃ©m disso, seu interruptor liga/desliga lateral garante um controle fÃ¡cil e intuitivo da mÃ¡quina, oferecendo praticidade e seguranÃ§a durante a operaÃ§Ã£o.",
    "especificacoes": [
      "AlimentaÃ§Ã£o: Bateria 12V 1.5Ah Li-ion",
      "TensÃ£o: 220V",
      "RotaÃ§Ãµes: 12.000 rpm",
      "Impacto: 0-5600 / 0-21600 IPM",
      "Torque: PosiÃ§Ã£o de torque: 21 + 1 + 1; Torque mÃ¡ximo: 25Nm",
      "Capacidades: Capacidade mÃ¡xima de perfuraÃ§Ã£o em aÃ§o: 8m; Capacidade mÃ¡xima de perfuraÃ§Ã£o em alvenaria: 8mm; Capacidade mÃ¡xima de perfuraÃ§Ã£o em madeira: 20mm",
      "Motor: sem escovas"
    ],
    "itensAcompanha": [
      "01 capa de proteÃ§Ã£o",
      "01 empunhadura auxiliar",
      "01 chave para troca do disco"
    ],
    "garantia": "1 ano de garantia direto com o fabricante",
    "preco": "R$ 289,52",
    "parcelas": "AtÃ© 12x R$104,21",
    "imagens": [
      "",
      "https://exemplo.com/imagem2.jpg",
      "https://exemplo.com/imagem3.jpg"
    ]
  }
,
  {
    "id": 4,
    "nome": "Esmerilhadeira Angular 230mm 9 Ws4703 220v Wesco Cor Azul-turquesa FrequÃªncia 60 Hz",
    "modelo": "WS4750",
    "marca": "Wesco",
    "descricao": "A Esmerilhadeira Angular 230mm/2350W da WESCO Ã© uma ferramenta poderosa projetada para atender Ã s demandas mais exigentes em trabalhos de corte e desbaste. Com um motor de 2350W de alta potÃªncia, esta esmerilhadeira oferece desempenho excepcional para uma variedade de aplicaÃ§Ãµes industriais e domÃ©sticas.",
    "especificacoes": [
      "AlimentaÃ§Ã£o: ElÃ©trica",
      "TensÃ£o: 220 volts",
      "RotaÃ§Ãµes: 6.500rpm",
      "Impacto: 0-5600 / 0-21600 IPM",
      "Torque: PosiÃ§Ã£o de torque: 21 + 1 + 1; Torque mÃ¡ximo: 25Nm",
      "Capacidades: Capacidade mÃ¡xima de perfuraÃ§Ã£o em aÃ§o: 8m; Capacidade mÃ¡xima de perfuraÃ§Ã£o em alvenaria: 8mm; Capacidade mÃ¡xima de perfuraÃ§Ã£o em madeira: 20mm",
      "Motor: sem escovas"
    ],
    "itensAcompanha": [
      "01 esmerilhadeira Angular 230mm 220V",
      "01 capa de proteÃ§Ã£o",
      "01 chave para troca do disco",
      "01 chave Allen"
    ],
    "garantia": "1 ano de garantia direto com o fabricante",
    "preco": "R$ 476,08",
    "parcelas": "AtÃ© 12x R$104,21",
    "imagens": [
      "",
      "https://exemplo.com/imagem2.jpg",
      "https://exemplo.com/imagem3.jpg"
    ]
  }

  ,
  {
    "id": 5,
    "nome": "Martelete Perfurador Demolidor Sds Plus 4,5j 1050w Wesco",
    "modelo": "WS4750",
    "marca": "Wesco",
    "descricao": "MARTELETE PERFURADOR/ROMPEDOR 26MM 1.050W WESCO WS3162K",
    "especificacoes": [
      "AlimentaÃ§Ã£o: ElÃ©trica",
      "TensÃ£o: 220 volts",
      "RotaÃ§Ãµes: 1.200 rpm",
      "Impacto: 0-4.700/ipm",
      "Torque: PosiÃ§Ã£o de torque: 21 + 1 + 1; Torque mÃ¡ximo: 25Nm",
      "Capacidades: Capacidade mÃ¡xima de perfuraÃ§Ã£o em aÃ§o: 8m; Capacidade mÃ¡xima de perfuraÃ§Ã£o em alvenaria: 8mm; Capacidade mÃ¡xima de perfuraÃ§Ã£o em madeira: 20mm",
      "Motor: sem escovas"
    ],
    "itensAcompanha": [
      "01 empunhadura auxiliar",
      "01 limitador de profundidade",
      "01 capa protetora para pÃ³",
      "01 chave",
      "01 maleta plÃ¡stica"
    ],
    "garantia": "1 ano de garantia direto com o fabricante",
    "preco": "R$ 629,90",
    "parcelas": "AtÃ© 12x R$104,21",
    "imagens": [
      "",
      "https://exemplo.com/imagem2.jpg",
      "https://exemplo.com/imagem3.jpg"
    ]
  }

  ,
  {
    "id": 6,
    "nome": "Chave De Impacto 1/2 Brushless 18v Bivolt Ws2382 Wesco",
    "modelo": "WS4750",
    "marca": "Wesco",
    "descricao": "A Chave de Impacto 1/2 a Bateria Brushless 18V Bivolt WS2382 da Wesco Ã© uma ferramenta versÃ¡til que pode ser usada em uma variedade de aplicaÃ§Ãµes, especialmente aquelas que envolvem aperto e desaperto de parafusos e porcas com alta potÃªncia de torque",
    "especificacoes": [
      "AlimentaÃ§Ã£o: 18V 2.0Ah Li",
      "TensÃ£o: 220 volts",
      "RotaÃ§Ãµes: 0-3.200 rpm",
      "Impacto: 0-4.700/ipm",
      "Torque: 300 Nm",
      "Capacidades: Capacidade mÃ¡xima de perfuraÃ§Ã£o em aÃ§o: 8m; Capacidade mÃ¡xima de perfuraÃ§Ã£o em alvenaria: 8mm; Capacidade mÃ¡xima de perfuraÃ§Ã£o em madeira: 20mm",
      "Motor: sem escovas"
    ],
    "itensAcompanha": [
      "01 baterias de 2.0Ah",
      "01 carregador 60 min - bivolt",
      "01 clip de cinto"
    ],
    "garantia": "1 ano de garantia direto com o fabricante",
    "preco": "R$ 951,82",
    "parcelas": "AtÃ© 12x R$104,21",
    "imagens": [
      "",
      "https://exemplo.com/imagem2.jpg",
      "https://exemplo.com/imagem3.jpg"
    ]
  }

  ,
  {
    "id": 7,
    "nome": "Lixadeira profissional roto orbital Wesco Profissional WS4265 azul-turquesa 400W 220V",
    "modelo": "WS4265",
    "marca": "Wesco",
    "descricao": "Com esta lixadeira, vocÃª conseguirÃ¡ um trabalho de maior qualidade para seus clientes, pois ela permitirÃ¡ que vocÃª realize o lixamento de diferentes materiais com o melhor resultado. Consiga detalhes exclusivos!",
    "especificacoes": [
      "AlimentaÃ§Ã£o: ElÃ©trica",
      "TensÃ£o: 220 volts",
      "RotaÃ§Ãµes: 0-3.200 rpm",
      "Impacto: 0-4.700/ipm",
      "Torque: 300 Nm",
      "Capacidades: Capacidade mÃ¡xima de perfuraÃ§Ã£o em aÃ§o: 8m; Capacidade mÃ¡xima de perfuraÃ§Ã£o em alvenaria: 8mm; Capacidade mÃ¡xima de perfuraÃ§Ã£o em madeira: 20mm",
      "Motor: sem escovas"
    ],
    "itensAcompanha": [
      "01 baterias de 2.0Ah",
      "01 carregador 60 min - bivolt",
      "01 clip de cinto"
    ],
    "garantia": "1 ano de garantia direto com o fabricante",
    "preco": "R$ 297,89",
    "parcelas": "AtÃ© 12x R$104,21",
    "imagens": [
      "",
      "https://exemplo.com/imagem2.jpg",
      "https://exemplo.com/imagem3.jpg"
    ]
  }

  ,
  {
    "id": 8,
    "nome": "MÃ¡quina solda inverter Touch 150 BV branco/azul 110V/220V Profissional Boxer",
    "modelo": "TOUCH 150BV",
    "marca": "Boxer",
    "descricao": "O KIT Inversora de Solda 140A BiVolt com FunÃ§Ã£o TIG Raspagem e MÃ¡scara de solda TOUCH 150 Boxer para soldar eletrodos atÃ© 3.25mm. Possui funÃ§Ãµes inteligentes, como Hot Start para uma abertura de arco mais fÃ¡cil e Anti Stick para que os eletrodos que colaram Ã  peÃ§a possam ser utilizados novamente. Solda eletrodo E6013, E7018, ferro fundido e Inox.",
    "especificacoes": [
      "AlimentaÃ§Ã£o: ElÃ©trica",
      "TensÃ£o: ElÃ©trica Bivolt",
      "RotaÃ§Ãµes: 0-3.200 rpm",
      "Impacto: 0-4.700/ipm",
      "Torque: 300 Nm",
      "Capacidades: Capacidade mÃ¡xima de perfuraÃ§Ã£o em aÃ§o: 8m; Capacidade mÃ¡xima de perfuraÃ§Ã£o em alvenaria: 8mm; Capacidade mÃ¡xima de perfuraÃ§Ã£o em madeira: 20mm",
      "Motor: sem escovas"
    ],
    "itensAcompanha": [
      "01 Cabo com garra negativa 300A",
      "01 Cabo com porta eletrodo 200A",
      "01 AlÃ§a Tiracolo",
      "01 MÃ¡scara de solda com vidro escuro"
    ],
    "garantia": "1 ano de garantia direto com o fabricante",
    "preco": "R$ 1.008,17",
    "parcelas": "AtÃ© 12x R$104,21",
    "imagens": [
      "",
      "https://exemplo.com/imagem2.jpg",
      "https://exemplo.com/imagem3.jpg"
    ]
  }

  ,
  {
    "id": 9,
    "nome": "MÃ¡quina de solda inverter Boxer Flama 201 BV azul e preta 127/220V",
    "modelo": "TOUCH 150BV",
    "marca": "Boxer",
    "descricao": "Inversora de Solda BOXER FLAMA 161BV MMA/Tig Bivolt. A MÃ¡quina de Solda Inversora FLAMA 161 BV Ã© a Inversora Ideal para o Serralheiro. Foi Projetada Para os Mais Exigentes Profissionais de Montagens MetalÃºrgicas.",
    "especificacoes": [
      "AlimentaÃ§Ã£o: ElÃ©trica",
      "TensÃ£o: 110/220V",
      "Eletrodos: 110V - atÃ© 2.5 mm / 220V atÃ© 3,25mm",
      "Peso: 4,9Kg",
      "Engate: 9mm",
      "Capacidades: Capacidade mÃ¡xima de perfuraÃ§Ã£o em aÃ§o: 8m; Capacidade mÃ¡xima de perfuraÃ§Ã£o em alvenaria: 8mm; Capacidade mÃ¡xima de perfuraÃ§Ã£o em madeira: 20mm",
      "Motor: sem escovas"
    ],
    "itensAcompanha": [
      "01 Cabo com garra negativa 300A",
      "01 Cabo com porta eletrodo 200A",
      "01 AlÃ§a Tiracolo",
      "01 MÃ¡scara de solda com vidro escuro"
    ],
    "garantia": "1 ano de garantia direto com o fabricante",
    "preco": "R$ 1.206",
    "parcelas": "AtÃ© 12x R$104,21",
    "imagens": [
      "",
      "https://exemplo.com/imagem2.jpg",
      "https://exemplo.com/imagem3.jpg"
    ]
  }

  ,
  {
    "id": 10,
    "nome": "MÃ¡quina de solda inverter Boxer Flama 161 BV azul e preta 110V/220V",
    "modelo": "TOUCH 150BV",
    "marca": "Boxer",
    "descricao": "Inversora de Solda BOXER FLAMA 161BV MMA/Tig Bivolt. A MÃ¡quina de Solda Inversora FLAMA 161 BV Ã© a Inversora Ideal para o Serralheiro. Foi Projetada Para os Mais Exigentes Profissionais de Montagens MetalÃºrgicas.",
    "especificacoes": [
      "AlimentaÃ§Ã£o: ElÃ©trica",
      "TensÃ£o: 110/220V",
      "Eletrodos: 110V - atÃ© 2.5 mm / 220V atÃ© 3,25mm",
      "Peso: 4,9Kg",
      "Amperagem: 110 v - 110 a @ 45% 160A @ 60%",
      "Engate: 9mm",
      "Motor: sem escovas"
    ],
    "itensAcompanha": [
      "01 Cabo com garra negativa 300A",
      "01 Cabo com porta eletrodo 200A",
      "01 AlÃ§a Tiracolo",
      "01 MÃ¡scara de solda com vidro escuro"
    ],
    "garantia": "1 ano de garantia direto com o fabricante",
    "preco": "R$ 738,90",
    "parcelas": "AtÃ© 12x R$104,21",
    "imagens": [
      "",
      "https://exemplo.com/imagem2.jpg",
      "https://exemplo.com/imagem3.jpg"
    ]
  }
]

// FunÃ§Ã£o para carregar a porqueira dos produtos
const carregarProdutos = () => {
  const produtos_ref = document.getElementById("produtos");

  // Exibe os produtos disponÃ­veis
  produtos.forEach(item => {
    const li = document.createElement("li");
    li.textContent = `${item.nome} (${item.id})`;
    produtos_ref.appendChild(li);

    const adicionarBtn = document.createElement("button");
    adicionarBtn.textContent = "Adicionar";
    adicionarBtn.onclick = () => adicionarProduto(item.id);
    li.appendChild(adicionarBtn);
  });
}

// Carrega o carinho, caso exista produtos
const carregarCarrinho = () => {
  const itens = JSON.parse(localStorage.getItem("carrinho")) || [];
  const 
    carrinho_ref = document.getElementById("carrinho"),
    botoes_ref = document.getElementById("botoes");

  carrinho_ref.innerHTML = "";
  botoes_ref.innerHTML = "";
  if(itens.length > 0) {
    itens.forEach(item => {
      const li = document.createElement("li");
      li.textContent = produtos[produtos.findIndex(i => i.id === item)].nome;
      carrinho_ref.appendChild(li);

      const removerBtn = document.createElement("button");
      removerBtn.textContent = "Remover";
      removerBtn.onclick = () => removerProduto(item);
      li.appendChild(removerBtn);
    });

    // Um monte de botÃ£o aff
    const 
      limparBtn = document.createElement("button"),
      link = document.createElement("a"),
      finalizarBtn = document.createElement("button");
    
    link.setAttribute("target", "_blank");
    link.setAttribute("href", gerarLink());
    limparBtn.textContent = "Esvaziar carrinho";
    limparBtn.onclick = () => limparCarrinho();
    finalizarBtn.textContent = "Finalizar compra";
    finalizarBtn.onclick = () => limparCarrinho();
    botoes_ref.appendChild(limparBtn);
    botoes_ref.appendChild(link);
    link.appendChild(finalizarBtn);
  } else {
    // TÃ¡
    const text = document.createTextNode("NÃ£o hÃ¡ produtos no carrinho.");
    carrinho_ref.appendChild(text);
  }
}

// Adiciona um produto ao carrinho shhshshshshshs
const adicionarProduto = (id) => {
  const itens = JSON.parse(localStorage.getItem("carrinho")) || [];
  itens.push(id);
  localStorage.setItem("carrinho", JSON.stringify(itens));
  carregarCarrinho();
}

// Remove um produto do carrinho shhshshshshshs
const removerProduto = (id) => {
  const itens = JSON.parse(localStorage.getItem("carrinho")) || [];
  const item = itens.findIndex(i => i === id);
  if(item >= 0) itens.splice(item, 1);
  localStorage.setItem("carrinho", JSON.stringify(itens));
  carregarCarrinho();
}


// Limpa o carrinho
const limparCarrinho = () => {
  localStorage.removeItem("carrinho");
  carregarCarrinho();
}

// Gera o link do zapers
const gerarLink = () => {
  const itens = JSON.parse(localStorage.getItem("carrinho")) || [];
  let lista = "ðŸ› *Pedido*\nOlÃ¡, tenho interesse em comprar os seguintes produtos:\n";

  itens.forEach((item, index) => {
    const produto = produtos[produtos.findIndex(i => i.id === item)];
    lista += `${index + 1}. *${produto.nome}* (Modelo: ${produto.modelo})\n`;
  });

  return "https://wa.me/5515998552790?text=" + encodeURI(lista);
}

window.addEventListener("load", () => {
  carregarProdutos();
  carregarCarrinho();
});